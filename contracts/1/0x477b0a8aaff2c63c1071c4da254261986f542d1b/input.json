{
  "language": "Solidity",
  "settings": {
    "libraries": {},
    "metadata": {
      "useLiteralContent": true
    },
    "optimizer": {
      "enabled": false,
      "runs": 200
    },
    "remappings": [],
    "outputSelection": {
      "*": {
        "*": [
          "*"
        ],
        "": [
          "*"
        ]
      }
    }
  },
  "sources": {
    "BorrowerDeployer.sol": {
      "content": "// Verified using https://dapp.tools\n\n// hevm: flattened sources of src/borrower/deployer.sol\npragma solidity >=0.5.15 <0.6.0;\n\n////// src/borrower/fabs/interfaces.sol\n// Copyright (C) 2020 Centrifuge\n\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n/* pragma solidity >=0.5.15 <0.6.0; */\n\ninterface NAVFeedFabLike {\n    function newFeed() external returns (address);\n}\n\ninterface TitleFabLike {\n    function newTitle(string calldata, string calldata) external returns (address);\n}\n\ninterface CollectorFabLike {\n    function newCollector(address, address, address) external returns (address);\n}\n\ninterface PileFabLike {\n    function newPile() external returns (address);\n}\n\ninterface ShelfFabLike {\n    function newShelf(address, address, address, address) external returns (address);\n}\n\n\n\n////// src/fixed_point.sol\n// Copyright (C) 2020 Centrifuge\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n/* pragma solidity >=0.5.15 <0.6.0; */\n\ncontract FixedPoint {\n    struct Fixed27 {\n        uint value;\n    }\n}\n\n////// src/borrower/deployer.sol\n// Copyright (C) 2020 Centrifuge\n\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n/* pragma solidity >=0.5.15 <0.6.0; */\n\n\n/* import { ShelfFabLike, CollectorFabLike, PileFabLike, TitleFabLike } from \"./fabs/interfaces.sol\"; */\n/* import { FixedPoint } from \"./../fixed_point.sol\"; */\n\n\ninterface DependLike_1 {\n    function depend(bytes32, address) external;\n}\n\ninterface AuthLike_1 {\n    function rely(address) external;\n    function deny(address) external;\n}\n\ninterface NFTFeedLike_1 {\n    function init() external;\n}\n\ninterface FeedFabLike {\n    function newFeed() external returns(address);\n}\n\n\ninterface FileLike_1 {\n    function file(bytes32 name, uint value) external;\n}\n\ncontract BorrowerDeployer is FixedPoint {\n    address      public root;\n\n    TitleFabLike     public titlefab;\n    ShelfFabLike     public shelffab;\n    PileFabLike      public pilefab;\n    CollectorFabLike public collectorFab;\n    FeedFabLike      public feedFab;\n\n    address public title;\n    address public shelf;\n    address public pile;\n    address public collector;\n    address public currency;\n    address public feed;\n\n    string  public titleName;\n    string  public titleSymbol;\n    Fixed27 public discountRate;\n\n    address constant ZERO = address(0);\n\n    constructor (\n      address root_,\n      address titlefab_,\n      address shelffab_,\n      address pilefab_,\n      address collectorFab_,\n      address feedFab_,\n      address currency_,\n      string memory titleName_,\n      string memory titleSymbol_,\n      uint discountRate_\n    ) public {\n        root = root_;\n\n        titlefab = TitleFabLike(titlefab_);\n        shelffab = ShelfFabLike(shelffab_);\n\n        pilefab = PileFabLike(pilefab_);\n        collectorFab = CollectorFabLike(collectorFab_);\n        feedFab = FeedFabLike(feedFab_);\n\n        currency = currency_;\n\n        titleName = titleName_;\n        titleSymbol = titleSymbol_;\n        discountRate = Fixed27(discountRate_);\n    }\n\n    function deployCollector() public {\n        require(collector == ZERO && address(shelf) != ZERO);\n        collector = collectorFab.newCollector(address(shelf), address(pile), address(feed));\n        AuthLike_1(collector).rely(root);\n    }\n\n    function deployPile() public {\n        require(pile == ZERO);\n        pile = pilefab.newPile();\n        AuthLike_1(pile).rely(root);\n    }\n\n    function deployTitle() public {\n        require(title == ZERO);\n        title = titlefab.newTitle(titleName, titleSymbol);\n        AuthLike_1(title).rely(root);\n    }\n\n    function deployShelf() public {\n        require(shelf == ZERO && title != ZERO && pile != ZERO && feed != ZERO);\n        shelf = shelffab.newShelf(currency, address(title), address(pile), address(feed));\n        AuthLike_1(shelf).rely(root);\n    }\n\n    function deployFeed() public {\n        feed = feedFab.newFeed();\n        AuthLike_1(feed).rely(root);\n    }\n\n    function deploy() public {\n        // ensures all required deploy methods were called\n        require(shelf != ZERO && collector != ZERO);\n\n        // shelf allowed to call\n        AuthLike_1(pile).rely(shelf);\n\n        DependLike_1(feed).depend(\"shelf\", address(shelf));\n        DependLike_1(feed).depend(\"pile\", address(pile));\n\n        // allow nftFeed to update rate groups\n        AuthLike_1(pile).rely(feed);\n        NFTFeedLike_1(feed).init();\n\n        DependLike_1(shelf).depend(\"subscriber\", address(feed));\n\n        AuthLike_1(feed).rely(shelf);\n        AuthLike_1(title).rely(shelf);\n\n        // collector allowed to call\n        AuthLike_1(shelf).rely(collector);\n\n        FileLike_1(feed).file(\"discountRate\", discountRate.value);\n    }\n}\n"
    }
  }
}